<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Beacon test</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.1/socket.io.js"
        integrity="sha512-vGcPDqyonHb0c11UofnOKdSAt5zYRpKI4ow+v6hat4i96b7nHSn8PQyk0sT5L9RECyksp+SztCPP6bqeeGaRKg=="
        crossorigin="anonymous"></script>
</head>

<body>
    <h1>Beacon</h1>

    <ul id="events"></ul>

    <button onClick="sendMsg()">Hit Me</button>

    <script>
        const $events = document.getElementById('events');

        const newItem = (content) => {
            const item = document.createElement('li');
            item.innerText = content;
            return item;
        };

        const auth = {auth: {token: 'authToken123'}};
        const socket = io("http://127.0.0.1:3000", auth);

        function sendMsg() {
            socket.emit("message", "HELLO WORLD");
        }

        socket.on('connect', () => {
            $events.appendChild(newItem('connect'));
        });

        socket.on('hello', (data) => {
            $events.appendChild(newItem(`hello - ${data}`));
        });
    </script>
</body>

</html>
